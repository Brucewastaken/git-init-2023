<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>App Usage Monitor</title>
</head>
<body>
  <h1>App Usage Monitor</h1>

  <ul id = "apps"></ul>



  <script>
    const { ipcRenderer } = require('electron');

    function requestAppList() {
      // Request the list of running processes from the main process
      ipcRenderer.send('request-app-list');
    }

    function requestAppUptime(appId) {
      // Request the uptime of the specified process from the main process
      ipcRenderer.send('request-app-uptime', appId);
    }

    ipcRenderer.on('app-list', (event, name, title, PID) => {
      
    });

    ipcRenderer.on('app-uptime', (event, uptime, appID) => {
      // Update the uptime of the selected app
      const table = document.getElementById('app-list');
      const rows = table.getElementsByTagName('tr');

      // Find the row that corresponds to the selected app
      for (let i = 2; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName('td');
        var cellIDExists = false;
        try {
            if (cells[1].innerText != undefined) {
                cellIDExists = true;
            }
        } catch {
            continue;
        }
        if (cellIDExists && cells[1].innerText === appID) {
          cells[2].innerText = uptime;
          break;
        }
      }
    });

    // Request the initial list of apps
    requestAppList();
  </script>
</body>
</html>