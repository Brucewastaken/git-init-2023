<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>App Usage Monitor</title>
  <script>
    var interval = 60; //in seconds
    var timeCounter = 0;
    var maxTime = 600;
  </script>
</head>
<body>
  <h1>App Usage Monitor</h1>

  <ul id = "apps">
    <li>hi</li>
  </ul>



  <script>
    const { ipcRenderer } = require('electron');

    function requestActiveApps() {
      ipcRenderer.send('check-background-apps', interval, timeCounter, maxTime);
    }

    ipcRenderer.on('app-list', (event, response) => {
      var apps = document.getElementById('apps');
      var item = document.createElement('li');
      item.textContent = response[0] + "\t\t\t\t\t\t\t\t" + response[1] + "\t\t\t\t\t\t\t\t" + response[3];
      apps.appendChild(item);
    });

    ipcRenderer.on('clear-list', (event) => {
      var apps = document.getElementById('apps');
      apps.innerHTML = "";
    });

    ipcRenderer.on('time-out', (event) => {
      
    });

    ipcRenderer.on('current-stats', (event, time) => {
      timeCounter = time;
    });



    
    requestActiveApps();
    setInterval(() => {
      requestActiveApps();
    }, interval*1000);
  </script>
</body>
</html>